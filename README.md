# 图文草稿批量生成器

一个基于Vue 3的单页面应用（SPA），用于验证图文草稿批量生成的核心玩法功能。

## 功能特性

### 1. 素材输入模块
- **直接上传**：支持拖拽上传商品图片（JPG/PNG）和Excel文件
- **在线录入**：提供完整的商品信息表单（名称、类目、品牌、材质、尺寸、颜色、适用人群）
- **批量导入**：支持Excel模板下载和批量导入
- **参考物上传**：支持上传历史爆款截图或粘贴参考链接
- **素材库保存**：可选保存本次素材至本地素材库

### 2. 草稿生成与展示模块
- **一键生成**：基于商品信息自动生成图文草稿
- **Canvas图片合成**：在商品图片底部添加卖点标签图层
- **智能文案生成**：根据商品信息自动生成标题和卖点文案
- **卡片网格展示**：以卡片形式展示每个商品的生成结果
- **实时编辑**：支持直接编辑标题和卖点文案

### 3. 操作与导出功能
- **批量下载**：支持打包下载所有选中草稿图片（ZIP格式）
- **批量复制**：支持批量复制文案到剪贴板
- **微调功能**：提供侧边栏编辑界面，支持精细调整
- **状态保存**：所有生成结果和编辑状态自动保存

## 技术栈

- **前端框架**：Vue 3 (组合式API) + TypeScript
- **UI组件库**：Element Plus
- **状态管理**：Pinia
- **图片处理**：Canvas API
- **Excel处理**：xlsx
- **文件压缩**：JSZip
- **本地存储**：IndexedDB
- **构建工具**：Vite

## 项目结构

```
draft-flow/
├── src/
│   ├── components/          # Vue组件
│   │   ├── MaterialInput.vue      # 素材输入组件
│   │   ├── DraftDisplay.vue        # 草稿展示组件
│   │   └── OperationPanel.vue     # 操作面板组件
│   ├── stores/              # Pinia状态管理
│   │   └── draft.ts              # 草稿状态管理
│   ├── types/               # TypeScript类型定义
│   │   └── index.ts              # 类型定义
│   ├── utils/               # 工具函数
│   │   ├── file.ts              # 文件操作工具
│   │   ├── generator.ts         # 草稿生成逻辑
│   │   ├── excel.ts             # Excel处理工具
│   │   └── storage.ts           # IndexedDB存储
│   ├── constants/           # 常量定义
│   │   └── index.ts              # 类目和模板常量
│   ├── App.vue              # 根组件
│   └── main.ts              # 入口文件
├── index.html               # HTML模板
├── package.json             # 项目配置
├── tsconfig.json            # TypeScript配置
├── vite.config.ts           # Vite配置
└── README.md                # 项目说明
```

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

项目将在 `http://localhost:3000` 启动，浏览器会自动打开。

### 3. 构建生产版本

```bash
npm run build
```

构建产物将输出到 `dist/` 目录。

### 4. 预览生产构建

```bash
npm run preview
```

## 使用指南

### 添加商品

#### 方式一：直接上传
1. 点击"直接上传"标签
2. 拖拽商品图片到上传区域，或点击上传
3. 可选：上传Excel文件批量导入商品

#### 方式二：在线录入
1. 点击"在线录入"标签
2. 填写商品信息（名称为必填项）
3. 上传商品图片
4. 点击"添加商品"按钮

### 添加参考物（可选）
1. 在"参考物"区域上传历史爆款截图
2. 或在输入框中粘贴参考链接URL
3. 点击"添加"按钮

### 生成草稿
1. 在右侧操作面板中点击"一键生成草稿"按钮
2. 等待生成完成（进度条显示生成进度）
3. 生成的草稿将显示在中间区域

### 编辑草稿
1. 点击草稿卡片上的"微调"按钮
2. 在侧边栏中编辑标题和卖点文案
3. 点击"保存修改"按钮

### 导出草稿
1. 勾选需要导出的草稿卡片
2. 点击"批量下载图片"或"批量复制文案"按钮
3. 或单独点击每个卡片的"下载本图"或"复制文案"按钮

## Excel导入模板

点击"下载Excel导入模板"按钮可获取模板文件。模板包含以下字段：

| 字段 | 说明 | 必填 |
|------|------|------|
| 商品名称 | 商品名称 | 是 |
| 类目 | 商品类目（clothing/shoes/bags等） | 否 |
| 品牌 | 商品品牌 | 否 |
| 材质 | 商品材质 | 否 |
| 尺寸 | 商品尺寸 | 否 |
| 颜色 | 商品颜色 | 否 |
| 适用人群 | 适用人群（多个用逗号分隔） | 否 |
| 图片URL | 商品图片URL | 否 |

## 核心功能说明

### 图片合成逻辑
使用Canvas API在商品图片底部添加半透明背景条，并根据类目自动填入1-2个基础卖点文案。支持自定义材质、颜色等参数替换。

### 文案生成逻辑
- **标题**：`${品牌} ${名称} ${适用人群} ${类目}`
- **卖点文案**：根据类目模板生成，包含材质、尺寸、适用人群等信息

### 状态管理
使用Pinia进行全局状态管理，支持：
- 商品列表管理
- 草稿结果管理
- 生成进度跟踪
- 选择状态管理

### 本地存储
使用IndexedDB实现：
- 商品信息持久化
- 草稿结果持久化
- 素材库功能

## 开发命令

```bash
# 启动开发服务器
npm run dev

# 类型检查
npm run typecheck

# 构建生产版本
npm run build

# 预览生产构建
npm run preview
```

## 浏览器兼容性

- Chrome >= 90
- Firefox >= 88
- Safari >= 14
- Edge >= 90

## 注意事项

1. **图片格式**：仅支持JPG和PNG格式
2. **图片大小**：建议单张图片不超过5MB
3. **Excel格式**：仅支持.xlsx和.xls格式
4. **本地存储**：IndexedDB有存储大小限制，建议定期清理
5. **跨域问题**：如果使用外部图片URL，需确保服务器支持CORS

## 后续扩展

当前为MVP版本，预留以下扩展接口：
- AI生成接口替换规则生成
- 模板库管理功能
- 更多图片处理效果
- 批量导出为PDF
- 云端存储集成

## 许可证

MIT License

## 联系方式

如有问题或建议，请提交Issue。
